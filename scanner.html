<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!--meta name="theme-color" content="#000000" /-->

    <title>QR File Scanner & auto</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="html5Qr.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 40px; background-color:white;}
        .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 300px;font-size:16px;border:1px solid #ccc}
        #qr-input { margin: 20px 0; }
        #status { margin-top: 15px; font-weight: bold; color: #555; }
        .btn-label { display: inline-block; padding: 7px 20px; background: black; color: white; border-radius: 5px; cursor: pointer;margin-bottom:5px; width:250px}
        .btn-label:hover { background: #0056b3; }
        input[type="file"] { display: none; }
      p{
          font-family: 
          'fontello' ;
          margin:5px;
          text-align:left
      }
     
    @font-face {
      font-family: 'fontello';
      src: url('fontello.eot?14907215');
      src: url('fontello.eot?14907215#iefix') format('embedded-opentype'),
           url('fontello.woff?14907215') format('woff'),
           url('fontello.ttf?14907215') format('truetype'),
           url('fontello.svg?14907215#fontello') format('svg');
      font-weight: normal;
      font-style: normal;
    }
    .icon
    {
      font-family: "fontello";
      font-style: normal;
      font-weight: normal;
      speak: none;
      display: inline-block;
      text-decoration: inherit;
      width: 1em;
      margin-right: .2em;
      text-align: center;
      font-variant: normal;
      text-transform: none;
      line-height: 1em;
      margin-left: .2em;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    } 
  @media (max-width: 1024px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 90%;font-size:16px}
}
  
  @media (max-width: 768px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 400px;font-size:16px}    
  }

  
  @media (max-width: 480px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 300px;font-size:16px}
}
  
  
    </style>

</head>
<body>

    <div class="container">
        <h2 style="color:blue">QR File Scanner</h2>
        <p>Select a QR code image to auto-connect</p>
        <p>First Click Open Chrome</p>
        <p>Maraming Salamat</p><br>
     
        <a style="text-decoration:none"class="btn-label" href="intent://nelolino1-gif.github.io/Qr#Intent;scheme=http;package=com.android.chrome;end">
           <i class="icon icon-chrome-1">&#xf268;</i>

 Open in Chrome</a>
        
        <label style="margin-top:5px"class="btn-label" for="qr-input"><i class="fa fa-qrcode"></i> Choose Image / Take Photo</label>
        <input type="file" id="qr-input" accept="image/*">
        
        <div id="status">Waiting for file...</div>
        <div id="reader" style="display:none;"></div>
    </div>

    <script>
        const html5QrCode = new Html5Qrcode("reader");
        const fileInput = document.getElementById('qr-input');
        const status = document.getElementById('status');

        // Function to check if a string is a valid HTTP/HTTPS URL
        function isValidHttpUrl(string) {
            let url;
            try {
                url = new URL(string);
            } catch (_) {
                return false;  
            }
            return url.protocol === "http:" || url.protocol === "https:";
        }

        fileInput.addEventListener('change', e => {
            if (e.target.files.length === 0) return;

            const imageFile = e.target.files[0];
            status.innerText = "Scanning...";
            status.style.color = "orange";

            // Scan the uploaded file
            html5QrCode.scanFile(imageFile, true)
                .then(decodedText => {
                    status.innerText = `Found: ${decodedText}`;
                    
                    // Check if it's a link
                    if (isValidHttpUrl(decodedText)) {
                        status.innerText = "Redirecting...";
                        status.style.color = "green";
                        // Auto-visit the link
                        window.location.href = decodedText;
                    } else {
                        status.style.color = "black";
                        alert("Scanned text is not a valid web link: " + decodedText);
                    }
                })
                .catch(err => {
                    status.innerText = "Error: No QR code found in this image.";
                    status.style.color = "red";
                    console.error(err);
                });
        });
    </script>
</body>
</html>
