<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Scan & Copy</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="html5Qr.js"></script>
    <style>
    
     *{
         margin:0;
         padding:0;
         box-sizing:border-box;
     }
        body { font-family: sans-serif; display:flex;
            flex-direction: column;
            align-items: center;
            padding: 20px; 
            background: #f4f4f9;
            align-items:center;
        }
            .container{
            width:340px;
            display:flex;
            flex-direction:column;
            background:;
            text-align:center;
            align-items: center;
            border-radius:10px ;
            padding:10px;  
            border:1px solid #ccc;                
        }
    
    
        #reader { width: 100%; max-width: 500px; border-radius: 8px; overflow: hidden; }
        .result-container { margin-top: 20px; width: 100%; max-width: 500px; text-align: center}
        #result-text { width: 100%;
            padding: 10px; 
            margin:0px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            background: ; 
            min-height: 40px;
            word-break: break-all;
            margin-left:auto;
            margin-right:auto;
            overflow-y:auto;
            resize:none;
        }
    
        .btn-container{
        margin:10px 0px;    
        display:flex;
        flex-direction:colunm;
        justify-content:center;
        column-gap:2px;
        background:;
        width:300px;
    }
    
        button { padding: 10px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px; font-weight: bold; width:200px}
        button:active { background: #0056b3; }
        .success-msg { color: green; font-size: 0.9rem; margin-top: 5px; display: none; }
    
    
        @media (max-width: 1024px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 90%;font-size:16px}
}
  
  @media (max-width: 768px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 400px;font-size:16px}    
  }

  
  @media (max-width: 480px) {
  .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center;  width: 340px;font-size:16px}
}
    
    
    
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">   
    <h2>Scan QR / Barcode</h2>
    <div id="reader"></div>

    <div class="result-container">
        <textarea readonly="" rows="2" cols="5" id="result-text">Scanned text will appear here...</textarea>
        
        <div class="btn-container">
            <button class="btn" id="copy-btn"><i class="fas fa-clipboard"></i> Copy</button>
            <button class="btn" id="" onclick="btnChrome()" ><i class="fab fa-chrome"></i> Open Chrome</button>
     
            
        </div>
        
        <div class="btn-container">
            <button class="btn" style="width:100%"  onclick="window.location='scanner.html'"><i class="fas fa-qrcode"></i> From File</button>
           
            
        </div>
        
           <p id="status" class="success-msg">Copied!</p>
          <i style="color:purple ">Create by: Nel Olino</i> <i class="fas fa-smile"style="color:purple"></i>

 
    </div>

    <script>
        
        const resultElement = document.getElementById('result-text');
        const copyBtn = document.getElementById('copy-btn');
        const statusMsg = document.getElementById('status');

        // 1. Initialize the Scanner
        const html5QrCode = new Html5Qrcode("reader");
        
        const config = { fps: 10, qrbox: { width: 250, height: 250 } };

        // Start scanning using the back camera
        html5QrCode.start(
            { facingMode: "environment" }, 
            config, 
            (decodedText) => {
                // Success: Show text
              resultElement.innerText = decodedText;
             
                //Auto Redirect Start
                        if (decodedText.startsWith('http://') || decodedText.startsWith('https://')) {
                     // Redirect sa URL
                        window.location.href = decodedText;
                        }
                
                  //Auto Redirect End
                
                
                
            },
            (errorMessage) => {
             //   Error: Usually just "No QR code found in frame"
          }
  
        
       );
        
        let inText = resultElement.innerText

//let Pass= resultElement.innerText
        // 2. Clipboard Logic
        copyBtn.addEventListener('click', () => {
          // const text = resultElement.innerText;
            var text = document.getElementById('result-text').value;
//console.log(textAreaValue);
            
          //  const text =try
            if (text && text !== "Scanned text will appear here...") {
                navigator.clipboard.writeText(text).then(() => {
                    statusMsg.style.display = 'block';
                    setTimeout(() => statusMsg.style.display = 'none', 2000);
                });
            }
        });
        
        



function btnChrome(url) {
  window.location.href ="intent://nelolino1-gif.github.io/Qr#Intent;scheme=http;package=com.android.chrome;end"
            
}


//btnChrome()
        
    </script>
 </div>
</body>
</html>