<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J QR Code Generator</title>
    <script src="assets/js/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
    *{
        padding:0;
        margin:0;
        box-sizing:border-box;
    }  
    
    body{
        margin-top:0px;
        border:;
        width:100vw;          
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        background:;            
       		font-family:'Arial', san-serif;                       
        }
    
   .container{
            width:300px;
            font-size:15px;
            border:;
            padding:5px;
            display:flex;
            flex-direction:column;
            justify-content:center;
            align-items:center;
            background:;
            gap:5px;
            
            
        }
    
    .btn-container{
            
            font-size:15px;
            border:;
            width:100%;
            display:flex;
            flex-direction:row;
            justify-content:center;
            align-items:center;
            gap:5px;
            background:;
            margin:5px;
            
            
        }
    
    
        h2{
            margin-top:15px;
            background:;
            font-size:20px;
        }
    
        input {
            padding: 5px; 
            width:236px;
            border:none;
            border-bottom: 2px dashed #000; 
          /*  border-radius: 3px; */
            text-align:center;
            font-weight:bold;
            font-size:16px;            
          }
    
    input:focus{
        outline:none;
        border:2px solid tomato;
    }
    
    .wrapper{
        background:white;
        border:1px solid;
        padding:10px;
        display: flex;
        flex-direction:row;  
        justify-content:center;
        align-items:center;  
        margin:5px 0px;    
        border-radius:5px;
        
        
    }
        .card {
            background:
            ;width: 100%;
            height:auto;
            text-align: center; 
        }
      

        button{
            width:75px;
            font-size:15px;
            padding:8px;
            border-radius:5px;           
            font-size:15px;           
            border: none;           
            cursor: pointer;
            color: white;
            font-weight: bold; 
            background-color: #007bff;                                         
        }
    
        button:focus{
            outline:none;
            border:;
            background-color: teal;      
        }
    
    
       select:required {
       border: 2px solid purple;
       background:red;
       color:#000;           
       }

       select:required:valid {
       border:2px solid purple;
       background:white;   
        }

           
        select{
            font-size:15px;
            padding:5px;
            border-radius:5px;
            border:2px solid;
            width:75px;
    
          }
       
       select:focus{
            outline:none;           
        }

      .result-container{
          display:flex;
          background:;
          text-align:center;
          flex-direction:column;
          align-content:center;
          align-items:center;
          width:100%;         
      }
    
    #result-text{
        text-align:center;        
        color:green;
        font-size:16px;
          }
    
    #result-text2{
        text-align:center;
        
        font-size:16px;
        color:blue;
           }
    
    
    @media print {
    button{
      display: none !important;
    }
    select{
      display: none !important;
    }
    footer{
      display: none !important;
    }        
            
    }
        
    </style>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<body>
    <div class="container">
       <h2>J QR Code Generator</h2> 
    <div style="font-weight:bold"id="result-text">Time and Date Appear Here...</div>  
    <input type="text" id="text-input" placeholder="Vaucher Code" oninput="">  
    <div class="btn-container">
    <select id="select1" onchange="" required="">
        <option value="">N/A</option>       
        <option value="4h">₱ 5</option>
        <option value="7h">₱10</option>
        <option value="15d">₱150</option>
        <option value="30d">₱300</option>

    </select>    
        <button class="btn btn-theme" onclick="generateQR()">submit</button> 
        <button class="btn btn-theme" onclick="generateRandom()">random</button>      
    </div>
<div class="wrapper">
    <div class="card">
        <div id="qrcode"></div>
    </div>
  </div>
    <div class="result-container"> 
    <div style="font-weight:bold"id="result-text2">Expire and Amount Appear Here...</div>    
    </div>  
    <div class="btn-container">
         <button  id="copy-btn">Client</button>        
         <button  id="copy-btn2">Terminal</button>
         <button style="width:80px"  onclick="window.print()">Print</button>  
         <!--button onclick="clearQr()">Clear</button-->      

    </div>   
    <br>
    <div class="no-print" >
        <footer>
            <i style="color:purple">Create by: Nel Olino</i> <i class="fas fa-smile"style="color:purple"></i>   
        </footer>        
     </div>

   </div>
<script>   
//input
            var myInput = document.getElementById("text-input");
            var myValue = myInput.value;
//random Qr
            function generateRandom() {                
            var date = new Date();
            var month = (date.getMonth() + 1).toString().padStart(2, '0');
            var day = date.getDate().toString().padStart(2, '0');
            var formattedDate = month + '' + day;
//  const today = new Date().toISOString().split('T')[0];
            const newtoday = formattedDate.replace(/-/g, '');             
            const randomNum = Math.floor(Math.random() * 1000) + 1;       
            myValue = `C${newtoday}${randomNum}`;
            myInput.value = myValue;
            }       
//Initialize the QR instance
        let qrcode = new QRCode(document.getElementById("qrcode"), {
            width: 215,
            height: 215,
        });
//Qr function start
           function generateQR() {    
            
            const formattedDate = new Date().toISOString().split('T')[0];
    
           const vcode=  document.getElementById("text-input").value;
          // let vcresult= "http://10.0.0.1/login?="+vcode+"&password=";
          let vcresult=`http://10.0.0.1/login?username=${vcode}&password=`
          let resultElement = document.getElementById('result-text')                                        
          const copyBtn = document.getElementById('copy-btn');
          const copyBtn2 = document.getElementById('copy-btn2');  
          const statusMsg = document.getElementById('status');
          resultElement.innerText= `${new Date().toLocaleDateString()} | ${new Date().toLocaleTimeString()}`;                                                                                                
          const data =vcresult;
// if condition Qr        
            if (data) {
                qrcode.makeCode(data);                
                if (vcode) {
                qrcode.makeCode(data);
                } else {
                qrcode.clear(); // Clears the QR if input is empty
               // resultElement.innerHTML=""
                       }                                                               
               } 
               else {
                qrcode.clear(); // Clears the QR if input is empty
               }                         
// 2. Clipboard Logic
        copyBtn.addEventListener('click', () => {
           const text = vcresult;
            if (text && text !== "Time and Date appear Here...") {
                navigator.clipboard.writeText(text).then(() => {
             //       statusMsg.style.display = 'block';
             //       setTimeout(() => statusMsg.style.display = 'none', 2000);
                });
            }
        }); 
//select logic               
        var selectValue = String(document.getElementById("select1").value);
        let Generation=`/ip hotspot user add name="${vcode}" password="" profile="default" comment="Qrandom" limit-uptime="${selectValue}"`              
               
      switch (selectValue) {
       case "":
        document.querySelector('#result-text2').innerHTML=  'Plese Select Amount'  
       break;
      case "4h":
        document.querySelector('#result-text2').innerHTML=  'Expire:4h | Amount ₱ 5'  
       break;
      case "7h":
        document.querySelector('#result-text2').innerHTML=  'Expire:7h | Amount ₱ 10'     
      break;        
      case "15d":
         document.querySelector('#result-text2').innerHTML=  'Expire:15d | Amount ₱ 150'
      break;
      case "30d":
         document.querySelector('#result-text2').innerHTML=  'Expire:30d | Amount ₱ 300'
      break;
      default:
   // alert("Option 3 ang napili");
}
                              
                                           
        copyBtn2.addEventListener('click', () => {
        const text2 = Generation;
            if (text2 && text2 !== "Scanned text will appear here...") {
                navigator.clipboard.writeText(text2).then(() => {
       //             statusMsg.style.display = 'block';
       //             setTimeout(() => statusMsg.style.display = 'none', 2000);
               });
            }
        });                                                               
  }

function clearQr(){
    qrcode.clear()
  //  resultElement.innerHTML=""
    document.getElementById("text-input").value="";
    document.querySelector('#result-text2').textContent='Please Select Amount'
    
 //   resultElement.innerHTML=""
   let resultElement = document.getElementById('result-text').innerHTML='Please Generate Qr Code';                                       
  // document.getElementById("qrcode").innerHTML='Please Generate Qr Code Here...';
 // innerHTML='Please Generate Qr Code Here...'

}

generateRandom()
generateQR()
                                                  
  </script>
</body>
</html>